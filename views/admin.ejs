<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Admin Panel</title>
		<link rel="stylesheet" href="/styles/style.css" />
		<link rel="stylesheet" href="/styles/admin.css" />
		<link rel="icon" href="./Images/favicon.png" />
		<script src="scripts/burger.js" defer></script>

		<link
			rel="stylesheet"
			href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css"
		/>
		<link
			rel="stylesheet"
			href="https://cdn.datatables.net/responsive/2.5.0/css/responsive.dataTables.min.css"
		/>

		<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
		<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
		<script src="https://cdn.datatables.net/responsive/2.5.0/js/dataTables.responsive.min.js"></script>
	</head>
	<body>
		<%- include('partials/header') %>
		<main>
			<h1>Admin Panel</h1>
			<% if (guests.length === 0) { %>
			<p>No submissions yet.</p>
			<% } else { %>
			<table id="guest-table" class="display nowrap" style="width: 100%">
				<thead>
					<tr>
						<th>First Name</th>
						<th>Last Name</th>
						<th>Job Title</th>
						<th>Company</th>
						<th>LinkedIn</th>
						<th>Email</th>
						<th>Meeting Type</th>
						<th>Other</th>
						<th>Message</th>
						<th>Date</th>
					</tr>
				</thead>
				<tbody>
					<% guests.forEach(guest => { %>
					<tr>
						<td><%= guest.fname %></td>
						<td><%= guest.lname %></td>
						<td><%= guest['job-title'] || '—' %></td>
						<td><%= guest.company || '—' %></td>
						<td>
							<% if (guest.linkedin) { %>
							<a
								href="<%= guest.linkedin.startsWith('http') ? guest.linkedin : 'https://' + guest.linkedin %>"
								target="_blank"
								>LinkedIn</a
							>
							<% } else { %> — <% } %>
						</td>
						<td><%= guest.email || '—' %></td>
						<td><%= guest.meet %></td>
						<td><%= guest.other || '—' %></td>
						<td><%= guest.message || '—' %></td>
						<td><%= guest.date.toLocaleString() %></td>
					</tr>
					<% }); %>
				</tbody>
			</table>
			<% } %>
		</main>
		<%- include('partials/footer') %>
	</body>

	<script>
		$(document).ready(function () {
			$("#guest-table").DataTable({
				responsive: true,
				pageLength: 10, // how many rows per page
			});
		});
	</script>
</html>
